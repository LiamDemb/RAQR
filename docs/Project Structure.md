# Project Directory Structure

This document outlines the purpose of each directory in the `raqr` codebase to ensure consistent development.

## 1. Core Source Code (`src/raqr/`)
This is the Python package. All reusable logic lives here.

*   **`data/`**: Logic for loading, cleaning, and normalizing datasets (NQ, WikiWhy, etc.). Contains the unified schema definitions.
*   **`probe/`**: The "Probe Search" module. Contains logic to run a cheap top-k retrieval and extract feedback signals (skewness, max_score) before routing.
*   **`routers/`**: The decision-making logic.
    *   `heuristic.py`: Regex and rule-based logic.
    *   `classifier.py`: The DistilBERT model definition and training logic.
    *   `llm.py`: Prompt templates for the LLM router.
*   **`strategies/`**: The 3 implementations of retrieval (Dense, Graph, Temporal). Each must adhere to a common interface and return a structured result (e.g., `StrategyResult`: `answer`, `contexts`, `scores`, `latency_ms`) for consistent evaluation and error analysis.

## 2. Experimentation & Execution
*   **`configs/`**: YAML files for configuration (e.g., `ablation_v1.yaml`). Used to switch between model types and input signals without changing code.
*   **`notebooks/`**: Jupyter notebooks for Exploratory Data Analysis (EDA), visualizing skewness distributions, and debugging individual components.
*   **`scripts/`**: Executable Python scripts that run the full pipeline stages (Ingestion $\to$ Oracle $\to$ Training $\to$ Evaluation).
*   **`tests/`**: Unit tests (`pytest`) to ensure the Probe calculates math correctly and Strategies return valid data.

## 3. Data Storage (Local Artifacts)
*Note: These folders are `.gitignored`.*

*   **`data/raw/`**: The original downloads (JSONL, CSV) from the source datasets.
*   **`data/processed/`**: The cleaned, unified corpus and the FAISS/Graph indexes.
*   **`data/training/`**: The "Gold Label" datasets generated by the Oracle, used to train the classifier.
*   **`models/`**: Saved PyTorch weights (`.pt`) for the trained Router Classifier.
*   **`results/`**: Output CSVs containing the final metrics (F1, Accuracy) from your experiments.